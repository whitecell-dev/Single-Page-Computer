{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "AXIS/KERN Metrics Schema",
  "description": "Captures quantitative performance and reasoning metrics per run",

  "type": "object",
  "required": ["runId", "timestamp", "primitiveStats", "durationMs"],
  "properties": {
    "runId": { "type": "string", "pattern": "^[a-zA-Z0-9_-]+$" },
    "timestamp": { "type": "string", "format": "date-time" },
    "durationMs": { "type": "integer", "minimum": 0 },
    "iterations": { "type": "integer", "minimum": 0 },
    "primitiveStats": {
      "type": "object",
      "properties": {
        "EXPRESSION_EVALUATOR": { "type": "integer", "minimum": 0 },
        "CONTEXT_SANITIZER": { "type": "integer", "minimum": 0 },
        "CONDITION_EVALUATOR": { "type": "integer", "minimum": 0 },
        "TEMPLATE_RESOLVER": { "type": "integer", "minimum": 0 },
        "STATE_MUTATOR": { "type": "integer", "minimum": 0 },
        "OBJECT_FLATTENER": { "type": "integer", "minimum": 0 },
        "RULE_APPLICATOR": { "type": "integer", "minimum": 0 },
        "ITERATION_MANAGER": { "type": "integer", "minimum": 0 }
      }
    },
    "invariantStats": {
      "type": "object",
      "properties": {
        "violations": { "type": "integer", "minimum": 0 },
        "warnings": { "type": "integer", "minimum": 0 },
        "checksPassed": { "type": "integer", "minimum": 0 }
      }
    },
    "resourceUsage": {
      "type": "object",
      "properties": {
        "cpuMs": { "type": "number", "minimum": 0 },
        "memoryMB": { "type": "number", "minimum": 0 },
        "ioOps": { "type": "integer", "minimum": 0 }
      }
    },
    "outcome": {
      "type": "string",
      "enum": ["success", "violation_detected", "timeout", "error"],
      "default": "success"
    },
    "notes": { "type": "string" }
  }
}

